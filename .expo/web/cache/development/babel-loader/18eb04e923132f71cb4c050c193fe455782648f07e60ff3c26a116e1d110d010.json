{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { createContext, useContext, useEffect, useState } from 'react';\nimport { MemberShipService } from \"../services/MemberShipService\";\nimport { useAuth } from 'react-native-auth-component';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar UserContext = createContext(undefined);\nvar memberShipService = MemberShipService.instance();\nexport var UserProvider = function UserProvider(_ref) {\n  var children = _ref.children;\n  var _useAuth = useAuth(),\n    user = _useAuth.user;\n  var _useState = useState(null),\n    _useState2 = _slicedToArray(_useState, 2),\n    userDetails = _useState2[0],\n    setUserDetails = _useState2[1];\n  useEffect(function () {\n    if (user != null && user.access_token) {\n      fetchUserDetails();\n    }\n  }, [user]);\n  var fetchUserDetails = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      try {\n        var fetchedUserDetails = yield memberShipService.getProfile();\n        setUserDetails(fetchedUserDetails.data);\n      } catch (error) {\n        console.error('Error fetching user details:', error);\n      }\n    });\n    return function fetchUserDetails() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var updateUserProfile = function () {\n    var _ref3 = _asyncToGenerator(function* (userId, body) {\n      try {\n        var updatedUserDetails = yield memberShipService.updateProfile(userId, body);\n        setUserDetails(updatedUserDetails);\n        return updatedUserDetails;\n      } catch (error) {\n        console.error('Error updating user profile:', error);\n        throw error;\n      }\n    });\n    return function updateUserProfile(_x, _x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  return _jsx(UserContext.Provider, {\n    value: {\n      userDetails: userDetails,\n      fetchUserDetails: fetchUserDetails,\n      updateUserProfile: updateUserProfile\n    },\n    children: children\n  });\n};\nexport var useUser = function useUser() {\n  var context = useContext(UserContext);\n  if (context === undefined) {\n    throw new Error('useUser must be used within a UserProvider');\n  }\n  return context;\n};","map":{"version":3,"names":["React","createContext","useContext","useEffect","useState","MemberShipService","useAuth","jsx","_jsx","UserContext","undefined","memberShipService","instance","UserProvider","_ref","children","_useAuth","user","_useState","_useState2","_slicedToArray","userDetails","setUserDetails","access_token","fetchUserDetails","_ref2","_asyncToGenerator","fetchedUserDetails","getProfile","data","error","console","apply","arguments","updateUserProfile","_ref3","userId","body","updatedUserDetails","updateProfile","_x","_x2","Provider","value","useUser","context","Error"],"sources":["/Users/sharmalperera/projects/apps/ExpoTemplateAppWithComponent/node_modules/react-native-user-profile-component/src/context/UserContext.tsx"],"sourcesContent":["// UserContext.tsx\nimport React, { createContext, useContext, useEffect, useState } from 'react';\nimport { MemberShipService } from '../services/MemberShipService';\nimport { useAuth } from 'react-native-auth-component';\n\n\n// Define the user details interface\ninterface UserDetails {\n  firstName: string;\n  lastName: string;\n  email: string;\n  apps: { appName: string }[];\n}\n\n// Define the context value type for user-related functions\ninterface UserContextType {\n  userDetails: UserDetails | null;\n  fetchUserDetails: () => Promise<boolean>;\n  updateUserProfile: (userId: string, body: any) => Promise<UserDetails>;\n}\n\n// Create the user context\nconst UserContext = createContext<UserContextType | undefined>(undefined);\nconst memberShipService = MemberShipService.instance();\n\nexport const UserProvider: React.FC = ({ children }) => {\n  const { user } = useAuth();\n  const [userDetails, setUserDetails] = useState<UserDetails | null>(null);\n\n  useEffect(() => {\n    if (user?.access_token) {\n      fetchUserDetails();\n    }\n  }, [user]);\n\n  const fetchUserDetails = async () => {\n    try {\n      const fetchedUserDetails = await memberShipService.getProfile();\n      setUserDetails(fetchedUserDetails.data);\n    } catch (error) {\n      console.error('Error fetching user details:', error);\n    }\n  };\n\n  const updateUserProfile = async (userId: string, body: any) => {\n    try {\n      const updatedUserDetails = await memberShipService.updateProfile(userId, body);\n      setUserDetails(updatedUserDetails);\n      return updatedUserDetails;\n    } catch (error) {\n      console.error('Error updating user profile:', error);\n      throw error;\n    }\n  };\n\n  return (\n    <UserContext.Provider value={{ userDetails, fetchUserDetails, updateUserProfile }}>\n      {children}\n    </UserContext.Provider>\n  );\n};\n\nexport const useUser = () => {\n  const context = useContext(UserContext);\n  if (context === undefined) {\n    throw new Error('useUser must be used within a UserProvider');\n  }\n  return context;\n};\n"],"mappings":";;AACA,OAAOA,KAAK,IAAIC,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC7E,SAASC,iBAAiB;AAC1B,SAASC,OAAO,QAAQ,6BAA6B;AAAC,SAAAC,GAAA,IAAAC,IAAA;AAmBtD,IAAMC,WAAW,GAAGR,aAAa,CAA8BS,SAAS,CAAC;AACzE,IAAMC,iBAAiB,GAAGN,iBAAiB,CAACO,QAAQ,CAAC,CAAC;AAEtD,OAAO,IAAMC,YAAsB,GAAG,SAAzBA,YAAsBA,CAAAC,IAAA,EAAqB;EAAA,IAAfC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;EAC/C,IAAAC,QAAA,GAAiBV,OAAO,CAAC,CAAC;IAAlBW,IAAI,GAAAD,QAAA,CAAJC,IAAI;EACZ,IAAAC,SAAA,GAAsCd,QAAQ,CAAqB,IAAI,CAAC;IAAAe,UAAA,GAAAC,cAAA,CAAAF,SAAA;IAAjEG,WAAW,GAAAF,UAAA;IAAEG,cAAc,GAAAH,UAAA;EAElChB,SAAS,CAAC,YAAM;IACd,IAAIc,IAAI,YAAJA,IAAI,CAAEM,YAAY,EAAE;MACtBC,gBAAgB,CAAC,CAAC;IACpB;EACF,CAAC,EAAE,CAACP,IAAI,CAAC,CAAC;EAEV,IAAMO,gBAAgB;IAAA,IAAAC,KAAA,GAAAC,iBAAA,CAAG,aAAY;MACnC,IAAI;QACF,IAAMC,kBAAkB,SAAShB,iBAAiB,CAACiB,UAAU,CAAC,CAAC;QAC/DN,cAAc,CAACK,kBAAkB,CAACE,IAAI,CAAC;MACzC,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACtD;IACF,CAAC;IAAA,gBAPKN,gBAAgBA,CAAA;MAAA,OAAAC,KAAA,CAAAO,KAAA,OAAAC,SAAA;IAAA;EAAA,GAOrB;EAED,IAAMC,iBAAiB;IAAA,IAAAC,KAAA,GAAAT,iBAAA,CAAG,WAAOU,MAAc,EAAEC,IAAS,EAAK;MAC7D,IAAI;QACF,IAAMC,kBAAkB,SAAS3B,iBAAiB,CAAC4B,aAAa,CAACH,MAAM,EAAEC,IAAI,CAAC;QAC9Ef,cAAc,CAACgB,kBAAkB,CAAC;QAClC,OAAOA,kBAAkB;MAC3B,CAAC,CAAC,OAAOR,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;QACpD,MAAMA,KAAK;MACb;IACF,CAAC;IAAA,gBATKI,iBAAiBA,CAAAM,EAAA,EAAAC,GAAA;MAAA,OAAAN,KAAA,CAAAH,KAAA,OAAAC,SAAA;IAAA;EAAA,GAStB;EAED,OACEzB,IAAA,CAACC,WAAW,CAACiC,QAAQ;IAACC,KAAK,EAAE;MAAEtB,WAAW,EAAXA,WAAW;MAAEG,gBAAgB,EAAhBA,gBAAgB;MAAEU,iBAAiB,EAAjBA;IAAkB,CAAE;IAAAnB,QAAA,EAC/EA;EAAQ,CACW,CAAC;AAE3B,CAAC;AAED,OAAO,IAAM6B,OAAO,GAAG,SAAVA,OAAOA,CAAA,EAAS;EAC3B,IAAMC,OAAO,GAAG3C,UAAU,CAACO,WAAW,CAAC;EACvC,IAAIoC,OAAO,KAAKnC,SAAS,EAAE;IACzB,MAAM,IAAIoC,KAAK,CAAC,4CAA4C,CAAC;EAC/D;EACA,OAAOD,OAAO;AAChB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}